{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///C:/xampp/htdocs/synseai/project/frontend/src/components/ProtectedRoute.tsx"],"sourcesContent":["\"use client\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\ninterface ProtectedRouteProps {\r\n  children: React.ReactNode;\r\n  allowedRoles: string[]; // e.g. [\"user\", \"employee\"]\r\n}\r\n\r\nexport default function ProtectedRoute({ children, allowedRoles }: ProtectedRouteProps) {\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const token = sessionStorage.getItem(\"access_token\");\r\n    const role = sessionStorage.getItem(\"role\");\r\n\r\n    if (!token || !role) {\r\n      router.push(\"/login\");\r\n      return;\r\n    }\r\n\r\n    if (!allowedRoles.includes(role)) {\r\n      router.push(\"/\"); // redirect if role not allowed\r\n      return;\r\n    }\r\n\r\n    setLoading(false);\r\n  }, [router, allowedRoles]);\r\n\r\n  return <>{children}</>;\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AACA;AACA;AAFA;;;;AASe,SAAS,eAAe,EAAE,QAAQ,EAAE,YAAY,EAAuB;IACpF,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,QAAQ,eAAe,OAAO,CAAC;QACrC,MAAM,OAAO,eAAe,OAAO,CAAC;QAEpC,IAAI,CAAC,SAAS,CAAC,MAAM;YACnB,OAAO,IAAI,CAAC;YACZ;QACF;QAEA,IAAI,CAAC,aAAa,QAAQ,CAAC,OAAO;YAChC,OAAO,IAAI,CAAC,MAAM,+BAA+B;YACjD;QACF;QAEA,WAAW;IACb,GAAG;QAAC;QAAQ;KAAa;IAEzB,qBAAO;kBAAG;;AACZ","debugId":null}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///C:/xampp/htdocs/synseai/project/frontend/src/app/filespusher/page.tsx"],"sourcesContent":["\"use client\";\r\nimport Head from \"next/head\";\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport ProtectedRoute from \"@/components/ProtectedRoute\";\r\nimport { FaArrowLeft, FaFileAlt, FaDownload, FaTimes, FaCheck, FaTimes as FaReject, FaExclamationTriangle, FaCheckCircle, FaInfoCircle } from \"react-icons/fa\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\nimport { Suspense } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\ninterface Department {\r\n  id: number;\r\n  name: string;\r\n  isActive: boolean;\r\n  isCompleted: boolean;\r\n}\r\n\r\ninterface FileItem {\r\n  id: string;\r\n  name: string;\r\n  details: string;\r\n  dateCreated: string;\r\n  isSelected: boolean;\r\n  department: string;\r\n  downloadUrl?: string;\r\n  currentLocation?: number;\r\n  iteration?: number[];\r\n}\r\n\r\ninterface DocumentSetting {\r\n  id: number;\r\n  current_location: number;\r\n  iteration: number[];\r\n  updated_at: string;\r\n  document_id: number;\r\n  document_name: string;\r\n  document_created_at: string;\r\n  document_description: string;\r\n  download_url: string;\r\n}\r\n\r\ninterface ModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  message: string;\r\n  type: 'success' | 'error' | 'warning' | 'info';\r\n  onConfirm?: () => void;\r\n  confirmText?: string;\r\n  cancelText?: string;\r\n  showInput?: boolean;\r\n  inputPlaceholder?: string;\r\n  inputValue?: string;\r\n  onInputChange?: (value: string) => void;\r\n}\r\n\r\n// Custom Modal Component\r\nconst CustomModal: React.FC<ModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  title,\r\n  message,\r\n  type,\r\n  onConfirm,\r\n  confirmText = \"OK\",\r\n  cancelText = \"Cancel\",\r\n  showInput = false,\r\n  inputPlaceholder = \"\",\r\n  inputValue = \"\",\r\n  onInputChange\r\n}) => {\r\n  if (!isOpen) return null;\r\n\r\n  const getIcon = () => {\r\n    switch (type) {\r\n      case 'success':\r\n        return <FaCheckCircle className=\"text-green-500 text-4xl\" />;\r\n      case 'error':\r\n        return <FaExclamationTriangle className=\"text-red-500 text-4xl\" />;\r\n      case 'warning':\r\n        return <FaExclamationTriangle className=\"text-yellow-500 text-4xl\" />;\r\n      case 'info':\r\n        return <FaInfoCircle className=\"text-blue-500 text-4xl\" />;\r\n      default:\r\n        return <FaInfoCircle className=\"text-gray-500 text-4xl\" />;\r\n    }\r\n  };\r\n\r\n  const getButtonColor = () => {\r\n    switch (type) {\r\n      case 'success':\r\n        return 'bg-green-600 hover:bg-green-700';\r\n      case 'error':\r\n        return 'bg-red-600 hover:bg-red-700';\r\n      case 'warning':\r\n        return 'bg-yellow-600 hover:bg-yellow-700';\r\n      case 'info':\r\n        return 'bg-blue-600 hover:bg-blue-700';\r\n      default:\r\n        return 'bg-gray-600 hover:bg-gray-700';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <motion.div\r\n          key=\"backdrop\"\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          className=\"fixed inset-0 flex items-center justify-center bg-black/50 z-50\"\r\n        >\r\n          <motion.div\r\n            key=\"modal\"\r\n            initial={{ opacity: 0, scale: 0.8 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            exit={{ opacity: 0, scale: 0.8 }}\r\n            transition={{ duration: 0.3, ease: \"easeOut\" }}\r\n            className=\"bg-white rounded-lg shadow-xl w-full max-w-md p-6 mx-4\"\r\n          >\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                {getIcon()}\r\n                <h2 className=\"text-xl font-semibold text-gray-800\">{title}</h2>\r\n              </div>\r\n              <button\r\n                onClick={onClose}\r\n                className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n              >\r\n                <FaTimes />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Message */}\r\n            <div className=\"mb-6\">\r\n              <p className=\"text-gray-600 leading-relaxed\">{message}</p>\r\n            </div>\r\n\r\n            {/* Input field if needed */}\r\n            {showInput && (\r\n              <div className=\"mb-6\">\r\n                <textarea\r\n                  value={inputValue}\r\n                  onChange={(e) => onInputChange?.(e.target.value)}\r\n                  placeholder={inputPlaceholder}\r\n                  className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none\"\r\n                  rows={3}\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {/* Action Buttons */}\r\n            <div className=\"flex justify-end space-x-3\">\r\n              {onConfirm ? (\r\n                <>\r\n                  <button\r\n                    onClick={onClose}\r\n                    className=\"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\r\n                  >\r\n                    {cancelText}\r\n                  </button>\r\n                  <button\r\n                    onClick={() => {\r\n                      onConfirm();\r\n                      onClose();\r\n                    }}\r\n                    className={`px-4 py-2 text-white rounded-lg transition-colors ${getButtonColor()}`}\r\n                  >\r\n                    {confirmText}\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                <button\r\n                  onClick={onClose}\r\n                  className={`px-6 py-2 text-white rounded-lg transition-colors ${getButtonColor()}`}\r\n                >\r\n                  {confirmText}\r\n                </button>\r\n              )}\r\n            </div>\r\n          </motion.div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n};\r\n\r\n// Loading Modal Component\r\nconst LoadingModal: React.FC<{ isOpen: boolean; message: string }> = ({ isOpen, message }) => {\r\n  return (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <motion.div\r\n          key=\"loading-backdrop\"\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          className=\"fixed inset-0 flex items-center justify-center bg-black/50 z-50\"\r\n        >\r\n          <motion.div\r\n            key=\"loading-box\"\r\n            initial={{ opacity: 0, scale: 0.8 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            exit={{ opacity: 0, scale: 0.8 }}\r\n            transition={{ duration: 0.3, ease: \"easeOut\" }}\r\n            className=\"bg-white rounded-lg shadow-xl p-6 mx-4\"\r\n          >\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#B11016]\"></div>\r\n              <p className=\"text-gray-700 font-medium\">{message}</p>\r\n            </div>\r\n          </motion.div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n};\r\n\r\nexport default function FilesPusher() {\r\n  return (\r\n    <Suspense fallback={<div>Loading...</div>}>\r\n      <FilesPusherContent />\r\n    </Suspense>\r\n  );\r\n}\r\n\r\nfunction FilesPusherContent() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const settingId = searchParams?.get(\"id\");\r\n  const API = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';\r\n\r\n  const [proposalTitle, setProposalTitle] = useState<string>(\"\");\r\n  const [proposalDetails, setProposalDetails] = useState<string>(\"\");\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [error, setError] = useState<string>(\"\");\r\n  const [documentSetting, setDocumentSetting] = useState<DocumentSetting | null>(null);\r\n  const [userDepartmentId, setUserDepartmentId] = useState<number | null>(null);\r\n  const [canInteract, setCanInteract] = useState<boolean>(false);\r\n  const [departments, setDepartments] = useState<Department[]>([]);\r\n  const [allDepartments, setAllDepartments] = useState<{ id: number, name: string }[]>([]);\r\n\r\n  const [isUploadModalOpen, setIsUploadModalOpen] = useState(false);\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n  const [fileName, setFileName] = useState<string>('');\r\n  const [fileDescription, setFileDescription] = useState<string>('');\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // Modal states\r\n  const [modal, setModal] = useState<{\r\n    isOpen: boolean;\r\n    title: string;\r\n    message: string;\r\n    type: 'success' | 'error' | 'warning' | 'info';\r\n    onConfirm?: () => void;\r\n    confirmText?: string;\r\n    cancelText?: string;\r\n    showInput?: boolean;\r\n    inputPlaceholder?: string;\r\n    inputValue?: string;\r\n    onInputChange?: (value: string) => void;\r\n  }>({\r\n    isOpen: false,\r\n    title: '',\r\n    message: '',\r\n    type: 'info'\r\n  });\r\n\r\n  const [loadingModal, setLoadingModal] = useState({\r\n    isOpen: false,\r\n    message: ''\r\n  });\r\n\r\n  const [rejectionReason, setRejectionReason] = useState('');\r\n\r\n  const [files, setFiles] = useState<FileItem[]>([]);\r\n\r\n  // Modal helper functions\r\n  const showSuccessModal = (message: string, onConfirm?: () => void) => {\r\n    setModal({\r\n      isOpen: true,\r\n      title: 'Success',\r\n      message,\r\n      type: 'success',\r\n      onConfirm,\r\n      confirmText: 'OK'\r\n    });\r\n  };\r\n\r\n  const showErrorModal = (message: string) => {\r\n    setModal({\r\n      isOpen: true,\r\n      title: 'Error',\r\n      message,\r\n      type: 'error',\r\n      confirmText: 'OK'\r\n    });\r\n  };\r\n\r\n  const showWarningModal = (message: string, onConfirm?: () => void, confirmText = 'Continue') => {\r\n    setModal({\r\n      isOpen: true,\r\n      title: 'Warning',\r\n      message,\r\n      type: 'warning',\r\n      onConfirm,\r\n      confirmText,\r\n      cancelText: 'Cancel'\r\n    });\r\n  };\r\n\r\n  const showInfoModal = (message: string) => {\r\n    setModal({\r\n      isOpen: true,\r\n      title: 'Information',\r\n      message,\r\n      type: 'info',\r\n      confirmText: 'OK'\r\n    });\r\n  };\r\n\r\n  const showInputModal = (title: string, message: string, placeholder: string, onConfirm: (value: string) => void) => {\r\n    setRejectionReason('');\r\n    setModal({\r\n      isOpen: true,\r\n      title,\r\n      message,\r\n      type: 'warning',\r\n      showInput: true,\r\n      inputPlaceholder: placeholder,\r\n      inputValue: rejectionReason,\r\n      onInputChange: setRejectionReason,\r\n      onConfirm: () => onConfirm(rejectionReason),\r\n      confirmText: 'Submit',\r\n      cancelText: 'Cancel'\r\n    });\r\n  };\r\n\r\n  const showLoadingModal = (message: string) => {\r\n    setLoadingModal({\r\n      isOpen: true,\r\n      message\r\n    });\r\n  };\r\n\r\n  const hideLoadingModal = () => {\r\n    setLoadingModal({\r\n      isOpen: false,\r\n      message: ''\r\n    });\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setModal({\r\n      isOpen: false,\r\n      title: '',\r\n      message: '',\r\n      type: 'info'\r\n    });\r\n  };\r\n\r\n  // Fetch all departments from database\r\n  const fetchDepartments = async () => {\r\n    try {\r\n      const token = sessionStorage.getItem('access_token');\r\n      if (!token) throw new Error(\"No token found.\");\r\n\r\n      const res = await fetch(`${API}/api/department`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n\r\n      if (!res.ok) {\r\n        throw new Error(`Failed to fetch departments: ${res.status}`);\r\n      }\r\n\r\n      const response = await res.json();\r\n      console.log(\"Fetched departments response:\", response);\r\n\r\n      // Extract departments array from the response\r\n      const departmentsData = response.departments || [];\r\n      setAllDepartments(departmentsData);\r\n      return departmentsData;\r\n    } catch (error) {\r\n      console.error(\"Error fetching departments:\", error);\r\n      throw error; // Re-throw to handle in calling function\r\n    }\r\n  };\r\n\r\n  // Enhanced function to get and refresh user's department ID\r\n  useEffect(() => {\r\n    const token = sessionStorage.getItem(\"access_token\");\r\n    const fetchUserDepartmentId = async () => {\r\n      if (!token) return;\r\n\r\n      try {\r\n        console.log(\"=== Fetching User Department from API ===\");\r\n        const res = await fetch(`${API}/api/user/me`, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        });\r\n\r\n        if (!res.ok) throw new Error(\"Failed to fetch user details\");\r\n\r\n        const data = await res.json();\r\n        console.log(\"✅ User data fetched:\", data);\r\n\r\n        // Extract department info\r\n        const deptId = data.department_id || data.user?.department_id;\r\n        const deptName = data.department_name || data.user?.department_name;\r\n\r\n        if (deptId) {\r\n          setUserDepartmentId(deptId);\r\n        } else {\r\n          console.warn(\"❌ Department ID missing in user data\");\r\n          setUserDepartmentId(null);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching user department:\", error);\r\n        setUserDepartmentId(null);\r\n      }\r\n    };\r\n\r\n    fetchUserDepartmentId();\r\n  }, [API]);\r\n\r\n  // Handle file selection from input or drag & drop\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files && e.target.files.length > 0) {\r\n      setSelectedFile(e.target.files[0]);\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e: React.DragEvent<HTMLDivElement>) => {\r\n    e.preventDefault();\r\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n      setSelectedFile(e.dataTransfer.files[0]);\r\n    }\r\n  };\r\n\r\n  // Update handler\r\n  const handleFileUpdate = async () => {\r\n    if (!selectedFile || !settingId) {\r\n      showErrorModal(\"Please select a file first.\");\r\n      return;\r\n    }\r\n\r\n    if (!canInteract) {\r\n      showErrorModal(\"You can only update documents that are currently at your department.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      showLoadingModal(\"Updating file...\");\r\n\r\n      const token = sessionStorage.getItem(\"access_token\");\r\n      if (!token) throw new Error(\"No token found.\");\r\n\r\n      const formData = new FormData();\r\n      formData.append(\"file\", selectedFile);\r\n\r\n      const res = await fetch(`${API}/api/document_setting/update/${settingId}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: formData,\r\n      });\r\n\r\n      const responseText = await res.text();\r\n      console.log(\"Update response:\", responseText);\r\n\r\n      hideLoadingModal();\r\n\r\n      if (!res.ok) {\r\n        throw new Error(`Update failed: ${responseText}`);\r\n      }\r\n\r\n      showSuccessModal(\"File updated successfully!\", () => {\r\n        setIsUploadModalOpen(false);\r\n        setSelectedFile(null);\r\n        setFileName(\"\");\r\n        setFileDescription(\"\");\r\n        window.location.reload();\r\n      });\r\n    } catch (err) {\r\n      hideLoadingModal();\r\n      const errorMessage = err instanceof Error ? err.message : \"Error updating file.\";\r\n      console.error(errorMessage);\r\n      showErrorModal(`Error updating file: ${errorMessage}`);\r\n    }\r\n  };\r\n\r\n  // Check if document is at the final department\r\n  const isAtFinalDepartment = () => {\r\n    if (!documentSetting) return false;\r\n    const currentIndex = documentSetting.iteration.indexOf(documentSetting.current_location);\r\n    return currentIndex >= documentSetting.iteration.length - 1;\r\n  };\r\n\r\n  // Push handler - moves document to next department in iteration\r\n  const handlePushDocument = async () => {\r\n    if (!settingId || !documentSetting) {\r\n      showErrorModal(\"No document setting found.\");\r\n      return;\r\n    }\r\n\r\n    if (!canInteract) {\r\n      showErrorModal(\"You can only push documents that are currently at your department.\");\r\n      return;\r\n    }\r\n\r\n    // Check if we're at the last department\r\n    if (isAtFinalDepartment()) {\r\n      showWarningModal(\"This document is already at the final department.\");\r\n      return;\r\n    }\r\n\r\n    showWarningModal(\r\n      \"Are you sure you want to push this document to the next department? This action cannot be undone.\",\r\n      async () => {\r\n        try {\r\n          showLoadingModal(\"Pushing document to next department...\");\r\n\r\n          const token = sessionStorage.getItem(\"access_token\");\r\n          if (!token) throw new Error(\"No token found.\");\r\n\r\n          const res = await fetch(`${API}/api/document_setting/push/${settingId}`, {\r\n            method: \"POST\",\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          });\r\n\r\n          hideLoadingModal();\r\n\r\n          if (!res.ok) {\r\n            const errorText = await res.text();\r\n            throw new Error(`Push failed: ${errorText}`);\r\n          }\r\n\r\n          const result = await res.json();\r\n          showSuccessModal(\"Document pushed to next department successfully!\", () => {\r\n            window.location.reload();\r\n          });\r\n        } catch (err) {\r\n          hideLoadingModal();\r\n          console.error(\"Error pushing document:\", err);\r\n          const errorMessage = err instanceof Error ? err.message : 'Unknown error';\r\n          showErrorModal(`Error pushing document: ${errorMessage}`);\r\n        }\r\n      },\r\n      \"Push Document\"\r\n    );\r\n  };\r\n\r\n  // Generic status update handler (similar to BpiDashboard pattern)\r\n  const handleStatusUpdate = async (newStatus: string, reason?: string) => {\r\n    const token = sessionStorage.getItem(\"access_token\");\r\n    if (!token) return;\r\n\r\n    if (!settingId) {\r\n      showErrorModal(\"No document setting found.\");\r\n      return;\r\n    }\r\n\r\n    if (!canInteract) {\r\n      showErrorModal(\"You can only update documents that are currently at your department.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const statusLabel = newStatus === 'APPROVED' ? 'Approving' :\r\n        newStatus === 'REJECTED' ? 'Rejecting' : 'Updating';\r\n      showLoadingModal(`${statusLabel} document...`);\r\n\r\n      // ✅ If status is APPROVED, call setapproved API\r\n      if (newStatus === 'APPROVED') {\r\n        const res = await fetch(`${API}/api/document_setting/setapproved/${settingId}`, {\r\n          method: 'PUT',\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        });\r\n\r\n        hideLoadingModal();\r\n\r\n        if (!res.ok) {\r\n          const errorData = await res.json().catch(() => ({ error: \"Unknown error\" }));\r\n          throw new Error(errorData.error || `Failed to set approval`);\r\n        }\r\n\r\n        const result = await res.json();\r\n\r\n        // ✅ Update local state to reflect approved = true\r\n        setDocumentSetting(prev => prev ? {\r\n          ...prev,\r\n          approved: result.approved,\r\n          updated_at: new Date().toISOString()\r\n        } : null);\r\n\r\n        showSuccessModal(`Document approved successfully!`, () => {\r\n          window.location.reload();\r\n        });\r\n\r\n        return; // Exit after approval\r\n      }\r\n\r\n      // ✅ If status is REJECTED or others, handle rejection reason (if needed)\r\n      if (newStatus === 'REJECTED') {\r\n        // You can add a separate API call or logic for rejection\r\n        hideLoadingModal();\r\n        showSuccessModal(`Document rejected successfully!`, () => {\r\n          window.location.reload();\r\n        });\r\n        return;\r\n      }\r\n\r\n      hideLoadingModal();\r\n      showSuccessModal(`Document status updated successfully!`, () => {\r\n        window.location.reload();\r\n      });\r\n\r\n    } catch (err) {\r\n      hideLoadingModal();\r\n      console.error(`Error updating document setting:`, err);\r\n      const errorMessage = err instanceof Error ? err.message : 'Unknown error';\r\n      showErrorModal(`Error updating document setting: ${errorMessage}`);\r\n    }\r\n  };\r\n\r\n  // Approve handler for final department\r\n  const handleApproveDocument = async () => {\r\n    if (!isAtFinalDepartment()) {\r\n      showErrorModal(\"You can only approve documents at the final department.\");\r\n      return;\r\n    }\r\n\r\n    showWarningModal(\r\n      \"Are you sure you want to approve this document? This action will mark the document as approved.\",\r\n      () => handleStatusUpdate('APPROVED'),\r\n      \"Approve Document\"\r\n    );\r\n  };\r\n\r\n  // Reject handler for final department\r\n  const handleRejectDocument = async () => {\r\n    if (!isAtFinalDepartment()) {\r\n      showErrorModal(\"You can only reject documents at the final department.\");\r\n      return;\r\n    }\r\n\r\n    showInputModal(\r\n      \"Reject Document\",\r\n      \"Please provide a reason for rejection:\",\r\n      \"Enter rejection reason (optional)...\",\r\n      (reason) => handleStatusUpdate('REJECTED', reason || \"No reason provided\")\r\n    );\r\n  };\r\n\r\n  // Helper function to get department name by ID\r\n  const getDepartmentNameById = (deptId: number) => {\r\n    const dept = allDepartments.find(d => d.id === deptId);\r\n    return dept ? dept.name : `Department ${deptId}`;\r\n  };\r\n\r\n  // Update department status based on iteration and current location\r\n  const updateDepartmentStatus = (iteration: number[], currentLocation: number) => {\r\n    if (!allDepartments.length) return;\r\n\r\n    // Create departments array based on iteration order\r\n    const orderedDepartments: Department[] = iteration.map((deptId) => {\r\n      const deptInfo = allDepartments.find(d => d.id === deptId);\r\n      const currentIndex = iteration.indexOf(currentLocation);\r\n      const deptIndex = iteration.indexOf(deptId);\r\n\r\n      return {\r\n        id: deptId,\r\n        name: deptInfo ? deptInfo.name : `Department ${deptId}`,\r\n        isActive: deptId === currentLocation,\r\n        isCompleted: deptIndex < currentIndex\r\n      };\r\n    });\r\n\r\n    setDepartments(orderedDepartments);\r\n  };\r\n\r\n  // Refresh user access when document or user department changes\r\n  const refreshUserAccess = async () => {\r\n    console.log(\"Refreshing user access...\");\r\n\r\n    // Re-check interaction permissions\r\n    if (documentSetting && userDepartmentId !== null) {\r\n      const canUserInteract = documentSetting.current_location === userDepartmentId;\r\n      setCanInteract(canUserInteract);\r\n      console.log(\"Updated access:\", {\r\n        canInteract: canUserInteract,\r\n        currentLocation: documentSetting.current_location,\r\n        userDept: userDepartmentId\r\n      });\r\n    }\r\n  };\r\n\r\n  // Fetch document setting and files data\r\n  useEffect(() => {\r\n    if (!settingId) {\r\n      setError(\"No document setting ID provided\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const fetchDocumentSettingAndFiles = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(\"\");\r\n\r\n        // First fetch departments\r\n        try {\r\n          await fetchDepartments();\r\n        } catch (deptError) {\r\n          console.error(\"Failed to fetch departments:\", deptError);\r\n          setError(\"Failed to load departments. Please try again.\");\r\n          return;\r\n        }\r\n\r\n        const token = sessionStorage.getItem('access_token');\r\n\r\n        if (!token) {\r\n          throw new Error(\"No authentication token found. Please log in again.\");\r\n        }\r\n\r\n        console.log(\"Attempting to fetch from:\", `${API}/api/document_setting/${settingId}`);\r\n\r\n        const res = await fetch(`${API}/api/document_setting/${settingId}`, {\r\n          method: 'GET',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json',\r\n            'Accept': 'application/json',\r\n          },\r\n        });\r\n\r\n        console.log(\"Response status:\", res.status);\r\n\r\n        if (!res.ok) {\r\n          let errorMessage = `Failed to fetch document setting: ${res.status}`;\r\n          try {\r\n            const errorData = await res.json();\r\n            errorMessage = errorData.error || errorData.message || errorMessage;\r\n          } catch {\r\n            errorMessage = `HTTP ${res.status}: ${res.statusText}`;\r\n          }\r\n          throw new Error(errorMessage);\r\n        }\r\n\r\n        const documentSetting = await res.json();\r\n        console.log(\"Received document setting:\", documentSetting);\r\n        setDocumentSetting(documentSetting);\r\n\r\n        // Set title and details from the actual document data\r\n        setProposalTitle(documentSetting.document_name || `Document Setting ${settingId}`);\r\n        setProposalDetails(documentSetting.document_description || \"Push the files to the departments for review and approval\");\r\n\r\n        // Refresh user access after loading document\r\n        setTimeout(() => refreshUserAccess(), 100);\r\n\r\n      } catch (err) {\r\n        console.error(\"Error fetching document setting:\", err);\r\n        const errorMessage = err instanceof Error ? err.message : \"Failed to fetch document data\";\r\n        setError(errorMessage);\r\n\r\n        setProposalTitle(`Document Setting ${settingId}`);\r\n        setProposalDetails(\"Push the files to the departments for review and approval\");\r\n        setFiles([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchDocumentSettingAndFiles();\r\n  }, [settingId, API]);\r\n\r\n  // Update departments when we have both document setting and departments data\r\n  useEffect(() => {\r\n    if (documentSetting && allDepartments.length > 0) {\r\n      updateDepartmentStatus(documentSetting.iteration, documentSetting.current_location);\r\n\r\n      // Create file items for each department in iteration\r\n      const fileItems: FileItem[] = documentSetting.iteration.map((deptId, index) => {\r\n        const deptName = getDepartmentNameById(deptId);\r\n        const currentIndex = documentSetting.iteration.indexOf(documentSetting.current_location);\r\n\r\n        return {\r\n          id: `${documentSetting.document_id}-${deptId}`,\r\n          name: documentSetting.document_name,\r\n          details: documentSetting.document_description || \"Document file\",\r\n          dateCreated: documentSetting.document_created_at\r\n            ? new Date(documentSetting.document_created_at).toISOString().split('T')[0]\r\n            : new Date().toISOString().split('T')[0],\r\n          isSelected: false,\r\n          department: deptName,\r\n          downloadUrl: `${API}/api/document/download_file/${documentSetting.document_id}`,\r\n          currentLocation: documentSetting.current_location,\r\n          iteration: documentSetting.iteration\r\n        };\r\n      });\r\n\r\n      setFiles(fileItems);\r\n    }\r\n  }, [documentSetting, allDepartments]);\r\n\r\n  // Check if user can interact with document (update/push/approve/reject)\r\n  useEffect(() => {\r\n    if (documentSetting && userDepartmentId !== null) {\r\n      const canUserInteract = documentSetting.current_location === userDepartmentId;\r\n      setCanInteract(canUserInteract);\r\n      console.log(\"Can user interact:\", canUserInteract, \"Current location:\", documentSetting.current_location, \"User dept:\", userDepartmentId);\r\n    }\r\n  }, [documentSetting, userDepartmentId]);\r\n\r\n  const handleFileSelect = (file: FileItem) => {\r\n    setFiles((prev) =>\r\n      prev.map((f) => (f.id === file.id ? { ...f, isSelected: !f.isSelected } : f))\r\n    );\r\n  };\r\n\r\n  // Download function\r\n  const handleDownload = (file: FileItem) => {\r\n    if (!file.downloadUrl) {\r\n      showErrorModal(\"No download URL available for this file\");\r\n      return;\r\n    }\r\n\r\n    console.log(\"Opening download URL:\", file.downloadUrl);\r\n    window.open(file.downloadUrl, \"_blank\");\r\n  };\r\n\r\n  // Get file card image based on department status\r\n  const getFileCardImage = (file: FileItem) => {\r\n    if (!documentSetting) return \"/images/file-card.png\";\r\n\r\n    const currentIndex = documentSetting.iteration.indexOf(documentSetting.current_location);\r\n    const fileDeptIndex = documentSetting.iteration.findIndex(deptId =>\r\n      getDepartmentNameById(deptId) === file.department\r\n    );\r\n\r\n    // If this department has been completed (file passed through)\r\n    if (fileDeptIndex < currentIndex) {\r\n      return \"/images/file-card-black.png\";\r\n    }\r\n\r\n    // If this is the current department\r\n    if (fileDeptIndex === currentIndex) {\r\n      return \"/images/file-card.png\";\r\n    }\r\n\r\n    // If this department hasn't been reached yet\r\n    return \"/images/file-card.png\";\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <ProtectedRoute allowedRoles={[\"user\", \"employee\", \"admin\"]}>\r\n        <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n          <div className=\"text-center\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#B11016] mx-auto mb-4\"></div>\r\n            <p className=\"text-gray-600\">Loading document...</p>\r\n          </div>\r\n        </div>\r\n      </ProtectedRoute>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ProtectedRoute allowedRoles={[\"user\", \"employee\", \"admin\"]}>\r\n      <div className=\"min-h-screen bg-gray-50 flex flex-col items-center px-4 sm:px-[5%] lg:px-[10%] py-4 sm:py-8\">\r\n        {/* Header */}\r\n        <div className=\"relative flex items-center w-full mt-2 mb-4\">\r\n          <button\r\n            onClick={() => router.back()}\r\n            className=\"absolute left-0 flex items-center text-[#B11016] hover:text-[#800b10] text-sm sm:text-base\"\r\n          >\r\n            <FaArrowLeft className=\"mr-2\" />\r\n            <span className=\"hidden sm:inline\">Back</span>\r\n          </button>\r\n\r\n          <div className=\"text-center w-full\">\r\n            <h1 className=\"text-xl sm:text-2xl lg:text-4xl font-bold text-[#B11016] pb-2 sm:pb-4\">\r\n              Files Pusher\r\n            </h1>\r\n            <p className=\"text-sm sm:text-md text-black mb-4 sm:mb-6 px-4\">\r\n              Push the files to the departments for review and approval.\r\n            </p>\r\n            <div className=\"mx-2 border-b-[3px] border-[#B11016]\"></div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Error Display */}\r\n        {error && (\r\n          <div className=\"w-full max-w-6xl mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded\">\r\n            <p className=\"text-sm\">{error}</p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Access Control Notice */}\r\n        {userDepartmentId === null && (\r\n          <div className=\"w-full max-w-6xl mb-4 p-4 bg-blue-100 border border-blue-400 text-blue-700 rounded\">\r\n            <p className=\"text-sm\">\r\n              <strong>Note:</strong> Department information not found.\r\n              <button\r\n                onClick={refreshUserAccess}\r\n                className=\"ml-2 px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700\"\r\n              >\r\n                Refresh Access\r\n              </button>\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {!canInteract && documentSetting && userDepartmentId !== null && (\r\n          <div className=\"w-full max-w-6xl mb-4 p-4 bg-yellow-100 border border-yellow-400 text-yellow-700 rounded\">\r\n            <p className=\"text-sm\">\r\n              This document is currently at {getDepartmentNameById(documentSetting.current_location)}.\r\n              You can only interact with documents that are at your department (Department ID: {userDepartmentId}).\r\n              <button\r\n                onClick={refreshUserAccess}\r\n                className=\"ml-2 px-2 py-1 bg-yellow-600 text-white text-xs rounded hover:bg-yellow-700\"\r\n              >\r\n                Refresh Access\r\n              </button>\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* File Info Headers */}\r\n        <div className=\"w-full max-w-6xl mt-2 grid grid-cols-3 gap-4 text-lg font-semibold text-gray-800\">\r\n          <div><span className=\"text-[#B11016] font-bold\">File Name:</span> {proposalTitle}</div>\r\n          <div><span className=\"text-[#B11016] font-bold\">File Description:</span>  {proposalDetails}</div>\r\n          <div>\r\n            <span className=\"text-[#B11016] font-bold\">Date created:</span>{\" \"}\r\n            {files.length > 0 ? files[0].dateCreated : \"N/A\"}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Department Navigation with File Cards Below */}\r\n        <div className=\"w-full max-w-6xl mt-6 mb-8\">\r\n          {/* Department Progress Indicator */}\r\n          <div className=\"flex space-x-2 w-full mb-6\">\r\n            {departments.map((dept) => (\r\n              <div\r\n                key={dept.id}\r\n                className={`flex-1 h-10 rounded flex items-center justify-center text-xs font-medium transition-colors duration-300 ${dept.isCompleted\r\n                  ? \"bg-[#333333] text-white\"\r\n                  : dept.isActive\r\n                    ? \"bg-[#B11016] text-white\"\r\n                    : \"bg-gray-300 text-gray-700\"\r\n                  }`}\r\n              >\r\n                <span className=\"text-center px-1 truncate\" title={dept.name}>\r\n                  {dept.name}\r\n                </span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* File Cards positioned below each department column */}\r\n          <div className=\"flex space-x-2 w-full\">\r\n            {departments.map((dept) => {\r\n              const deptFile = files.find(file => file.department === dept.name);\r\n\r\n              return (\r\n                <div key={dept.id} className=\"flex-1 flex flex-col items-center\">\r\n                  {deptFile ? (\r\n                    <div className=\"text-center\">\r\n                      <div\r\n                        className={`cursor-pointer transition-all duration-200 ${deptFile.isSelected ? \"transform scale-105\" : \"\"\r\n                          }`}\r\n                        onClick={() => handleFileSelect(deptFile)}\r\n                      >\r\n                        <div className=\"relative mb-4\">\r\n                          <Image\r\n                            src={deptFile.isSelected ? \"/images/file-card-black.png\" : getFileCardImage(deptFile)}\r\n                            alt=\"File Card\"\r\n                            width={120}\r\n                            height={144}\r\n                            className=\"mx-auto\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"text-xs font-medium text-gray-800 mb-2 truncate px-1\" title={deptFile.name}>\r\n                        {deptFile.name}\r\n                      </div>\r\n\r\n                      {/* Download Button */}\r\n                      <button\r\n                        onClick={() => handleDownload(deptFile)}\r\n                        className=\"px-3 py-1 bg-[#B11016] text-white text-xs rounded hover:bg-[#800b10] transition-colors flex items-center justify-center mx-auto\"\r\n                        disabled={!deptFile.downloadUrl}\r\n                      >\r\n                        <FaDownload className=\"mr-1\" size={10} />\r\n                        Download\r\n                      </button>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-center py-8 text-gray-400\">\r\n                      <FaFileAlt className=\"mx-auto text-2xl mb-2 opacity-30\" />\r\n                      <p className=\"text-xs\">\r\n                        No file\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {/* Show message if no files at all */}\r\n          {files.length === 0 && (\r\n            <div className=\"text-center py-12 text-gray-500\">\r\n              <FaFileAlt className=\"mx-auto text-4xl mb-4 opacity-30\" />\r\n              <p className=\"text-sm sm:text-base\">\r\n                No document available\r\n              </p>\r\n              <p className=\"text-xs text-gray-400 mt-2\">\r\n                Document will appear here when loaded\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"w-full max-w-6xl mb-8\">\r\n          <div className=\"flex justify-center space-x-4\">\r\n            <button\r\n              onClick={() => setIsUploadModalOpen(true)}\r\n              disabled={!canInteract || userDepartmentId === null}\r\n              className={`${isAtFinalDepartment() ? 'w-full max-w-xs' : 'w-full max-w-xs'} px-6 py-3 rounded transition-colors ${canInteract && userDepartmentId !== null\r\n                ? \"bg-[#333333] text-white hover:bg-[#0f0f0f]\"\r\n                : \"bg-gray-400 text-gray-600 cursor-not-allowed\"\r\n                }`}\r\n            >\r\n              Update\r\n            </button>\r\n\r\n            {/* Show Push button if not at final department */}\r\n            {!isAtFinalDepartment() && (\r\n              <button\r\n                onClick={handlePushDocument}\r\n                disabled={!canInteract || userDepartmentId === null}\r\n                className={`w-full max-w-xs px-6 py-3 rounded transition-colors ${canInteract && userDepartmentId !== null\r\n                  ? \"bg-[#B11016] text-white hover:bg-[#800b10]\"\r\n                  : \"bg-gray-400 text-gray-600 cursor-not-allowed\"\r\n                  }`}\r\n              >\r\n                Push\r\n              </button>\r\n            )}\r\n\r\n            {/* Show Approve/Reject buttons if at final department */}\r\n            {isAtFinalDepartment() && (\r\n              <>\r\n                <button\r\n                  onClick={handleApproveDocument}\r\n                  disabled={!canInteract || userDepartmentId === null}\r\n                  className={`w-full max-w-xs px-6 py-3 rounded transition-colors flex items-center justify-center ${canInteract && userDepartmentId !== null\r\n                    ? \"bg-green-600 text-white hover:bg-green-700\"\r\n                    : \"bg-gray-400 text-gray-600 cursor-not-allowed\"\r\n                    }`}\r\n                >\r\n                  <FaCheck className=\"mr-2\" />\r\n                  Approve\r\n                </button>\r\n\r\n                <button\r\n                  onClick={handleRejectDocument}\r\n                  disabled={!canInteract || userDepartmentId === null}\r\n                  className={`w-full max-w-xs px-6 py-3 rounded transition-colors flex items-center justify-center ${canInteract && userDepartmentId !== null\r\n                    ? \"bg-red-600 text-white hover:bg-red-700\"\r\n                    : \"bg-gray-400 text-gray-600 cursor-not-allowed\"\r\n                    }`}\r\n                >\r\n                  <FaReject className=\"mr-2\" />\r\n                  Reject\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {/* Help text */}\r\n          <div className=\"text-center text-sm text-gray-500 mt-2 space-y-1\">\r\n            {userDepartmentId === null ? (\r\n              <p>Department information not available. Please check your login setup or refresh access.</p>\r\n            ) : !canInteract ? (\r\n              <p>You can only interact with documents that are currently at your department.</p>\r\n            ) : isAtFinalDepartment() ? (\r\n              <p>Document has reached the final department. You can update, approve, or reject the document.</p>\r\n            ) : (\r\n              <p>You can update the document or push it to the next department.</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Upload Modal with Drag & Drop */}\r\n        {isUploadModalOpen && (\r\n          <div className=\"fixed inset-0 flex items-center justify-center bg-black/50 z-50\">\r\n            <div className=\"bg-white rounded-lg shadow-lg w-full max-w-lg p-6 relative mx-4\">\r\n              {/* Close button */}\r\n              <button\r\n                onClick={() => {\r\n                  setIsUploadModalOpen(false);\r\n                  setSelectedFile(null);\r\n                  setFileName('');\r\n                  setFileDescription('');\r\n                }}\r\n                className=\"absolute top-3 right-3 text-gray-500 hover:text-gray-700\"\r\n              >\r\n                <FaTimes />\r\n              </button>\r\n\r\n              <h2 className=\"text-xl font-semibold text-[#B11016] mb-4\">\r\n                Update File\r\n              </h2>\r\n\r\n              {/* Drag and Drop Area */}\r\n              <div\r\n                onDrop={handleDrop}\r\n                onDragOver={(e) => e.preventDefault()}\r\n                className=\"border-2 border-dashed border-red-300 rounded-lg p-6 text-center cursor-pointer hover:border-red-500 transition mb-4\"\r\n                onClick={() => fileInputRef.current?.click()}\r\n              >\r\n                <img\r\n                  src=\"/images/uploadicon.png\"\r\n                  alt=\"Upload Icon\"\r\n                  className=\"mx-auto h-12 w-12 object-contain\"\r\n                />\r\n\r\n                <p className=\"mt-2 text-gray-600 text-sm\">\r\n                  Drag & drop files or{\" \"}\r\n                  <span className=\"text-red-600 underline\">Browse</span>\r\n                </p>\r\n                <p className=\"text-xs text-gray-400\">\r\n                  Supported formats: JPEG, PNG, PDF, DOCX\r\n                </p>\r\n\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\".jpeg,.jpg,.png,.pdf,.docx\"\r\n                  ref={fileInputRef}\r\n                  className=\"hidden\"\r\n                  onChange={handleFileChange}\r\n                />\r\n              </div>\r\n\r\n              {/* Selected File Display */}\r\n              {selectedFile && (\r\n                <div className=\"mb-4 p-2 border border-green-400 rounded bg-green-50 text-green-700 text-sm\">\r\n                  Selected: {selectedFile.name}\r\n                </div>\r\n              )}\r\n\r\n              {/* Update Button */}\r\n              <button\r\n                onClick={handleFileUpdate}\r\n                disabled={!selectedFile}\r\n                className=\"w-full px-4 py-2 bg-[#B11016] text-white rounded hover:bg-[#800b10] transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed\"\r\n              >\r\n                Update File\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Custom Modal */}\r\n        <CustomModal\r\n          isOpen={modal.isOpen}\r\n          onClose={closeModal}\r\n          title={modal.title}\r\n          message={modal.message}\r\n          type={modal.type}\r\n          onConfirm={modal.onConfirm}\r\n          confirmText={modal.confirmText}\r\n          cancelText={modal.cancelText}\r\n          showInput={modal.showInput}\r\n          inputPlaceholder={modal.inputPlaceholder}\r\n          inputValue={modal.inputValue}\r\n          onInputChange={modal.onInputChange}\r\n        />\r\n\r\n        {/* Loading Modal */}\r\n        <LoadingModal\r\n          isOpen={loadingModal.isOpen}\r\n          message={loadingModal.message}\r\n        />\r\n      </div>\r\n    </ProtectedRoute>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AAEA;AAAA;AARA;;;;;;;;;AAwDA,yBAAyB;AACzB,MAAM,cAAoC,CAAC,EACzC,MAAM,EACN,OAAO,EACP,KAAK,EACL,OAAO,EACP,IAAI,EACJ,SAAS,EACT,cAAc,IAAI,EAClB,aAAa,QAAQ,EACrB,YAAY,KAAK,EACjB,mBAAmB,EAAE,EACrB,aAAa,EAAE,EACf,aAAa,EACd;IACC,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,UAAU;QACd,OAAQ;YACN,KAAK;gBACH,qBAAO,8OAAC,8IAAA,CAAA,gBAAa;oBAAC,WAAU;;;;;;YAClC,KAAK;gBACH,qBAAO,8OAAC,8IAAA,CAAA,wBAAqB;oBAAC,WAAU;;;;;;YAC1C,KAAK;gBACH,qBAAO,8OAAC,8IAAA,CAAA,wBAAqB;oBAAC,WAAU;;;;;;YAC1C,KAAK;gBACH,qBAAO,8OAAC,8IAAA,CAAA,eAAY;oBAAC,WAAU;;;;;;YACjC;gBACE,qBAAO,8OAAC,8IAAA,CAAA,eAAY;oBAAC,WAAU;;;;;;QACnC;IACF;IAEA,MAAM,iBAAiB;QACrB,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT;gBACE,OAAO;QACX;IACF;IAEA,qBACE,8OAAC,yLAAA,CAAA,kBAAe;kBACb,wBACC,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;YAET,SAAS;gBAAE,SAAS;YAAE;YACtB,SAAS;gBAAE,SAAS;YAAE;YACtB,MAAM;gBAAE,SAAS;YAAE;YACnB,WAAU;sBAEV,cAAA,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;gBAET,SAAS;oBAAE,SAAS;oBAAG,OAAO;gBAAI;gBAClC,SAAS;oBAAE,SAAS;oBAAG,OAAO;gBAAE;gBAChC,MAAM;oBAAE,SAAS;oBAAG,OAAO;gBAAI;gBAC/B,YAAY;oBAAE,UAAU;oBAAK,MAAM;gBAAU;gBAC7C,WAAU;;kCAGV,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;oCACZ;kDACD,8OAAC;wCAAG,WAAU;kDAAuC;;;;;;;;;;;;0CAEvD,8OAAC;gCACC,SAAS;gCACT,WAAU;0CAEV,cAAA,8OAAC,8IAAA,CAAA,UAAO;;;;;;;;;;;;;;;;kCAKZ,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAE,WAAU;sCAAiC;;;;;;;;;;;oBAI/C,2BACC,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BACC,OAAO;4BACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;4BAC/C,aAAa;4BACb,WAAU;4BACV,MAAM;;;;;;;;;;;kCAMZ,8OAAC;wBAAI,WAAU;kCACZ,0BACC;;8CACE,8OAAC;oCACC,SAAS;oCACT,WAAU;8CAET;;;;;;8CAEH,8OAAC;oCACC,SAAS;wCACP;wCACA;oCACF;oCACA,WAAW,CAAC,kDAAkD,EAAE,kBAAkB;8CAEjF;;;;;;;yDAIL,8OAAC;4BACC,SAAS;4BACT,WAAW,CAAC,kDAAkD,EAAE,kBAAkB;sCAEjF;;;;;;;;;;;;eAhEH;;;;;WAPF;;;;;;;;;;AAgFd;AAEA,0BAA0B;AAC1B,MAAM,eAA+D,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE;IACvF,qBACE,8OAAC,yLAAA,CAAA,kBAAe;kBACb,wBACC,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;YAET,SAAS;gBAAE,SAAS;YAAE;YACtB,SAAS;gBAAE,SAAS;YAAE;YACtB,MAAM;gBAAE,SAAS;YAAE;YACnB,WAAU;sBAEV,cAAA,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;gBAET,SAAS;oBAAE,SAAS;oBAAG,OAAO;gBAAI;gBAClC,SAAS;oBAAE,SAAS;oBAAG,OAAO;gBAAE;gBAChC,MAAM;oBAAE,SAAS;oBAAG,OAAO;gBAAI;gBAC/B,YAAY;oBAAE,UAAU;oBAAK,MAAM;gBAAU;gBAC7C,WAAU;0BAEV,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;;;;;sCACf,8OAAC;4BAAE,WAAU;sCAA6B;;;;;;;;;;;;eATxC;;;;;WAPF;;;;;;;;;;AAuBd;AAEe,SAAS;IACtB,qBACE,8OAAC,qMAAA,CAAA,WAAQ;QAAC,wBAAU,8OAAC;sBAAI;;;;;;kBACvB,cAAA,8OAAC;;;;;;;;;;AAGP;AAEA,SAAS;IACP,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,eAAe,CAAA,GAAA,kIAAA,CAAA,kBAAe,AAAD;IACnC,MAAM,YAAY,cAAc,IAAI;IACpC,MAAM,MAAM,6DAAmC;IAE/C,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAC3D,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAC/D,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW;IAChD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAC3C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAA0B;IAC/E,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IACxE,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW;IACxD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAgB,EAAE;IAC/D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAkC,EAAE;IAEvF,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3D,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9D,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IACjD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAC/D,MAAM,eAAe,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAoB;IAE9C,eAAe;IACf,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAY9B;QACD,QAAQ;QACR,OAAO;QACP,SAAS;QACT,MAAM;IACR;IAEA,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;QAC/C,QAAQ;QACR,SAAS;IACX;IAEA,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAc,EAAE;IAEjD,yBAAyB;IACzB,MAAM,mBAAmB,CAAC,SAAiB;QACzC,SAAS;YACP,QAAQ;YACR,OAAO;YACP;YACA,MAAM;YACN;YACA,aAAa;QACf;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,SAAS;YACP,QAAQ;YACR,OAAO;YACP;YACA,MAAM;YACN,aAAa;QACf;IACF;IAEA,MAAM,mBAAmB,CAAC,SAAiB,WAAwB,cAAc,UAAU;QACzF,SAAS;YACP,QAAQ;YACR,OAAO;YACP;YACA,MAAM;YACN;YACA;YACA,YAAY;QACd;IACF;IAEA,MAAM,gBAAgB,CAAC;QACrB,SAAS;YACP,QAAQ;YACR,OAAO;YACP;YACA,MAAM;YACN,aAAa;QACf;IACF;IAEA,MAAM,iBAAiB,CAAC,OAAe,SAAiB,aAAqB;QAC3E,mBAAmB;QACnB,SAAS;YACP,QAAQ;YACR;YACA;YACA,MAAM;YACN,WAAW;YACX,kBAAkB;YAClB,YAAY;YACZ,eAAe;YACf,WAAW,IAAM,UAAU;YAC3B,aAAa;YACb,YAAY;QACd;IACF;IAEA,MAAM,mBAAmB,CAAC;QACxB,gBAAgB;YACd,QAAQ;YACR;QACF;IACF;IAEA,MAAM,mBAAmB;QACvB,gBAAgB;YACd,QAAQ;YACR,SAAS;QACX;IACF;IAEA,MAAM,aAAa;QACjB,SAAS;YACP,QAAQ;YACR,OAAO;YACP,SAAS;YACT,MAAM;QACR;IACF;IAEA,sCAAsC;IACtC,MAAM,mBAAmB;QACvB,IAAI;YACF,MAAM,QAAQ,eAAe,OAAO,CAAC;YACrC,IAAI,CAAC,OAAO,MAAM,IAAI,MAAM;YAE5B,MAAM,MAAM,MAAM,MAAM,GAAG,IAAI,eAAe,CAAC,EAAE;gBAC/C,QAAQ;gBACR,SAAS;oBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;oBAClC,gBAAgB;gBAClB;YACF;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,MAAM,IAAI,MAAM,CAAC,6BAA6B,EAAE,IAAI,MAAM,EAAE;YAC9D;YAEA,MAAM,WAAW,MAAM,IAAI,IAAI;YAC/B,QAAQ,GAAG,CAAC,iCAAiC;YAE7C,8CAA8C;YAC9C,MAAM,kBAAkB,SAAS,WAAW,IAAI,EAAE;YAClD,kBAAkB;YAClB,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,MAAM,OAAO,yCAAyC;QACxD;IACF;IAEA,4DAA4D;IAC5D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,QAAQ,eAAe,OAAO,CAAC;QACrC,MAAM,wBAAwB;YAC5B,IAAI,CAAC,OAAO;YAEZ,IAAI;gBACF,QAAQ,GAAG,CAAC;gBACZ,MAAM,MAAM,MAAM,MAAM,GAAG,IAAI,YAAY,CAAC,EAAE;oBAC5C,SAAS;wBACP,eAAe,CAAC,OAAO,EAAE,OAAO;wBAChC,gBAAgB;oBAClB;gBACF;gBAEA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;gBAE7B,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,QAAQ,GAAG,CAAC,wBAAwB;gBAEpC,0BAA0B;gBAC1B,MAAM,SAAS,KAAK,aAAa,IAAI,KAAK,IAAI,EAAE;gBAChD,MAAM,WAAW,KAAK,eAAe,IAAI,KAAK,IAAI,EAAE;gBAEpD,IAAI,QAAQ;oBACV,oBAAoB;gBACtB,OAAO;oBACL,QAAQ,IAAI,CAAC;oBACb,oBAAoB;gBACtB;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,mCAAmC;gBACjD,oBAAoB;YACtB;QACF;QAEA;IACF,GAAG;QAAC;KAAI;IAER,kDAAkD;IAClD,MAAM,mBAAmB,CAAC;QACxB,IAAI,EAAE,MAAM,CAAC,KAAK,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG;YAC/C,gBAAgB,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE;QACnC;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,EAAE,cAAc;QAChB,IAAI,EAAE,YAAY,CAAC,KAAK,IAAI,EAAE,YAAY,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG;YAC3D,gBAAgB,EAAE,YAAY,CAAC,KAAK,CAAC,EAAE;QACzC;IACF;IAEA,iBAAiB;IACjB,MAAM,mBAAmB;QACvB,IAAI,CAAC,gBAAgB,CAAC,WAAW;YAC/B,eAAe;YACf;QACF;QAEA,IAAI,CAAC,aAAa;YAChB,eAAe;YACf;QACF;QAEA,IAAI;YACF,iBAAiB;YAEjB,MAAM,QAAQ,eAAe,OAAO,CAAC;YACrC,IAAI,CAAC,OAAO,MAAM,IAAI,MAAM;YAE5B,MAAM,WAAW,IAAI;YACrB,SAAS,MAAM,CAAC,QAAQ;YAExB,MAAM,MAAM,MAAM,MAAM,GAAG,IAAI,6BAA6B,EAAE,WAAW,EAAE;gBACzE,QAAQ;gBACR,SAAS;oBACP,eAAe,CAAC,OAAO,EAAE,OAAO;gBAClC;gBACA,MAAM;YACR;YAEA,MAAM,eAAe,MAAM,IAAI,IAAI;YACnC,QAAQ,GAAG,CAAC,oBAAoB;YAEhC;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,MAAM,IAAI,MAAM,CAAC,eAAe,EAAE,cAAc;YAClD;YAEA,iBAAiB,8BAA8B;gBAC7C,qBAAqB;gBACrB,gBAAgB;gBAChB,YAAY;gBACZ,mBAAmB;gBACnB,OAAO,QAAQ,CAAC,MAAM;YACxB;QACF,EAAE,OAAO,KAAK;YACZ;YACA,MAAM,eAAe,eAAe,QAAQ,IAAI,OAAO,GAAG;YAC1D,QAAQ,KAAK,CAAC;YACd,eAAe,CAAC,qBAAqB,EAAE,cAAc;QACvD;IACF;IAEA,+CAA+C;IAC/C,MAAM,sBAAsB;QAC1B,IAAI,CAAC,iBAAiB,OAAO;QAC7B,MAAM,eAAe,gBAAgB,SAAS,CAAC,OAAO,CAAC,gBAAgB,gBAAgB;QACvF,OAAO,gBAAgB,gBAAgB,SAAS,CAAC,MAAM,GAAG;IAC5D;IAEA,gEAAgE;IAChE,MAAM,qBAAqB;QACzB,IAAI,CAAC,aAAa,CAAC,iBAAiB;YAClC,eAAe;YACf;QACF;QAEA,IAAI,CAAC,aAAa;YAChB,eAAe;YACf;QACF;QAEA,wCAAwC;QACxC,IAAI,uBAAuB;YACzB,iBAAiB;YACjB;QACF;QAEA,iBACE,qGACA;YACE,IAAI;gBACF,iBAAiB;gBAEjB,MAAM,QAAQ,eAAe,OAAO,CAAC;gBACrC,IAAI,CAAC,OAAO,MAAM,IAAI,MAAM;gBAE5B,MAAM,MAAM,MAAM,MAAM,GAAG,IAAI,2BAA2B,EAAE,WAAW,EAAE;oBACvE,QAAQ;oBACR,SAAS;wBACP,eAAe,CAAC,OAAO,EAAE,OAAO;wBAChC,gBAAgB;oBAClB;gBACF;gBAEA;gBAEA,IAAI,CAAC,IAAI,EAAE,EAAE;oBACX,MAAM,YAAY,MAAM,IAAI,IAAI;oBAChC,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,WAAW;gBAC7C;gBAEA,MAAM,SAAS,MAAM,IAAI,IAAI;gBAC7B,iBAAiB,oDAAoD;oBACnE,OAAO,QAAQ,CAAC,MAAM;gBACxB;YACF,EAAE,OAAO,KAAK;gBACZ;gBACA,QAAQ,KAAK,CAAC,2BAA2B;gBACzC,MAAM,eAAe,eAAe,QAAQ,IAAI,OAAO,GAAG;gBAC1D,eAAe,CAAC,wBAAwB,EAAE,cAAc;YAC1D;QACF,GACA;IAEJ;IAEA,kEAAkE;IAClE,MAAM,qBAAqB,OAAO,WAAmB;QACnD,MAAM,QAAQ,eAAe,OAAO,CAAC;QACrC,IAAI,CAAC,OAAO;QAEZ,IAAI,CAAC,WAAW;YACd,eAAe;YACf;QACF;QAEA,IAAI,CAAC,aAAa;YAChB,eAAe;YACf;QACF;QAEA,IAAI;YACF,MAAM,cAAc,cAAc,aAAa,cAC7C,cAAc,aAAa,cAAc;YAC3C,iBAAiB,GAAG,YAAY,YAAY,CAAC;YAE7C,gDAAgD;YAChD,IAAI,cAAc,YAAY;gBAC5B,MAAM,MAAM,MAAM,MAAM,GAAG,IAAI,kCAAkC,EAAE,WAAW,EAAE;oBAC9E,QAAQ;oBACR,SAAS;wBACP,eAAe,CAAC,OAAO,EAAE,OAAO;wBAChC,gBAAgB;oBAClB;gBACF;gBAEA;gBAEA,IAAI,CAAC,IAAI,EAAE,EAAE;oBACX,MAAM,YAAY,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC;4BAAE,OAAO;wBAAgB,CAAC;oBAC1E,MAAM,IAAI,MAAM,UAAU,KAAK,IAAI,CAAC,sBAAsB,CAAC;gBAC7D;gBAEA,MAAM,SAAS,MAAM,IAAI,IAAI;gBAE7B,kDAAkD;gBAClD,mBAAmB,CAAA,OAAQ,OAAO;wBAChC,GAAG,IAAI;wBACP,UAAU,OAAO,QAAQ;wBACzB,YAAY,IAAI,OAAO,WAAW;oBACpC,IAAI;gBAEJ,iBAAiB,CAAC,+BAA+B,CAAC,EAAE;oBAClD,OAAO,QAAQ,CAAC,MAAM;gBACxB;gBAEA,QAAQ,sBAAsB;YAChC;YAEA,yEAAyE;YACzE,IAAI,cAAc,YAAY;gBAC5B,yDAAyD;gBACzD;gBACA,iBAAiB,CAAC,+BAA+B,CAAC,EAAE;oBAClD,OAAO,QAAQ,CAAC,MAAM;gBACxB;gBACA;YACF;YAEA;YACA,iBAAiB,CAAC,qCAAqC,CAAC,EAAE;gBACxD,OAAO,QAAQ,CAAC,MAAM;YACxB;QAEF,EAAE,OAAO,KAAK;YACZ;YACA,QAAQ,KAAK,CAAC,CAAC,gCAAgC,CAAC,EAAE;YAClD,MAAM,eAAe,eAAe,QAAQ,IAAI,OAAO,GAAG;YAC1D,eAAe,CAAC,iCAAiC,EAAE,cAAc;QACnE;IACF;IAEA,uCAAuC;IACvC,MAAM,wBAAwB;QAC5B,IAAI,CAAC,uBAAuB;YAC1B,eAAe;YACf;QACF;QAEA,iBACE,mGACA,IAAM,mBAAmB,aACzB;IAEJ;IAEA,sCAAsC;IACtC,MAAM,uBAAuB;QAC3B,IAAI,CAAC,uBAAuB;YAC1B,eAAe;YACf;QACF;QAEA,eACE,mBACA,0CACA,wCACA,CAAC,SAAW,mBAAmB,YAAY,UAAU;IAEzD;IAEA,+CAA+C;IAC/C,MAAM,wBAAwB,CAAC;QAC7B,MAAM,OAAO,eAAe,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAC/C,OAAO,OAAO,KAAK,IAAI,GAAG,CAAC,WAAW,EAAE,QAAQ;IAClD;IAEA,mEAAmE;IACnE,MAAM,yBAAyB,CAAC,WAAqB;QACnD,IAAI,CAAC,eAAe,MAAM,EAAE;QAE5B,oDAAoD;QACpD,MAAM,qBAAmC,UAAU,GAAG,CAAC,CAAC;YACtD,MAAM,WAAW,eAAe,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;YACnD,MAAM,eAAe,UAAU,OAAO,CAAC;YACvC,MAAM,YAAY,UAAU,OAAO,CAAC;YAEpC,OAAO;gBACL,IAAI;gBACJ,MAAM,WAAW,SAAS,IAAI,GAAG,CAAC,WAAW,EAAE,QAAQ;gBACvD,UAAU,WAAW;gBACrB,aAAa,YAAY;YAC3B;QACF;QAEA,eAAe;IACjB;IAEA,+DAA+D;IAC/D,MAAM,oBAAoB;QACxB,QAAQ,GAAG,CAAC;QAEZ,mCAAmC;QACnC,IAAI,mBAAmB,qBAAqB,MAAM;YAChD,MAAM,kBAAkB,gBAAgB,gBAAgB,KAAK;YAC7D,eAAe;YACf,QAAQ,GAAG,CAAC,mBAAmB;gBAC7B,aAAa;gBACb,iBAAiB,gBAAgB,gBAAgB;gBACjD,UAAU;YACZ;QACF;IACF;IAEA,wCAAwC;IACxC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,WAAW;YACd,SAAS;YACT,WAAW;YACX;QACF;QAEA,MAAM,+BAA+B;YACnC,IAAI;gBACF,WAAW;gBACX,SAAS;gBAET,0BAA0B;gBAC1B,IAAI;oBACF,MAAM;gBACR,EAAE,OAAO,WAAW;oBAClB,QAAQ,KAAK,CAAC,gCAAgC;oBAC9C,SAAS;oBACT;gBACF;gBAEA,MAAM,QAAQ,eAAe,OAAO,CAAC;gBAErC,IAAI,CAAC,OAAO;oBACV,MAAM,IAAI,MAAM;gBAClB;gBAEA,QAAQ,GAAG,CAAC,6BAA6B,GAAG,IAAI,sBAAsB,EAAE,WAAW;gBAEnF,MAAM,MAAM,MAAM,MAAM,GAAG,IAAI,sBAAsB,EAAE,WAAW,EAAE;oBAClE,QAAQ;oBACR,SAAS;wBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;wBAClC,gBAAgB;wBAChB,UAAU;oBACZ;gBACF;gBAEA,QAAQ,GAAG,CAAC,oBAAoB,IAAI,MAAM;gBAE1C,IAAI,CAAC,IAAI,EAAE,EAAE;oBACX,IAAI,eAAe,CAAC,kCAAkC,EAAE,IAAI,MAAM,EAAE;oBACpE,IAAI;wBACF,MAAM,YAAY,MAAM,IAAI,IAAI;wBAChC,eAAe,UAAU,KAAK,IAAI,UAAU,OAAO,IAAI;oBACzD,EAAE,OAAM;wBACN,eAAe,CAAC,KAAK,EAAE,IAAI,MAAM,CAAC,EAAE,EAAE,IAAI,UAAU,EAAE;oBACxD;oBACA,MAAM,IAAI,MAAM;gBAClB;gBAEA,MAAM,kBAAkB,MAAM,IAAI,IAAI;gBACtC,QAAQ,GAAG,CAAC,8BAA8B;gBAC1C,mBAAmB;gBAEnB,sDAAsD;gBACtD,iBAAiB,gBAAgB,aAAa,IAAI,CAAC,iBAAiB,EAAE,WAAW;gBACjF,mBAAmB,gBAAgB,oBAAoB,IAAI;gBAE3D,6CAA6C;gBAC7C,WAAW,IAAM,qBAAqB;YAExC,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,oCAAoC;gBAClD,MAAM,eAAe,eAAe,QAAQ,IAAI,OAAO,GAAG;gBAC1D,SAAS;gBAET,iBAAiB,CAAC,iBAAiB,EAAE,WAAW;gBAChD,mBAAmB;gBACnB,SAAS,EAAE;YACb,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC;QAAW;KAAI;IAEnB,6EAA6E;IAC7E,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,mBAAmB,eAAe,MAAM,GAAG,GAAG;YAChD,uBAAuB,gBAAgB,SAAS,EAAE,gBAAgB,gBAAgB;YAElF,qDAAqD;YACrD,MAAM,YAAwB,gBAAgB,SAAS,CAAC,GAAG,CAAC,CAAC,QAAQ;gBACnE,MAAM,WAAW,sBAAsB;gBACvC,MAAM,eAAe,gBAAgB,SAAS,CAAC,OAAO,CAAC,gBAAgB,gBAAgB;gBAEvF,OAAO;oBACL,IAAI,GAAG,gBAAgB,WAAW,CAAC,CAAC,EAAE,QAAQ;oBAC9C,MAAM,gBAAgB,aAAa;oBACnC,SAAS,gBAAgB,oBAAoB,IAAI;oBACjD,aAAa,gBAAgB,mBAAmB,GAC5C,IAAI,KAAK,gBAAgB,mBAAmB,EAAE,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GACzE,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;oBAC1C,YAAY;oBACZ,YAAY;oBACZ,aAAa,GAAG,IAAI,4BAA4B,EAAE,gBAAgB,WAAW,EAAE;oBAC/E,iBAAiB,gBAAgB,gBAAgB;oBACjD,WAAW,gBAAgB,SAAS;gBACtC;YACF;YAEA,SAAS;QACX;IACF,GAAG;QAAC;QAAiB;KAAe;IAEpC,wEAAwE;IACxE,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,mBAAmB,qBAAqB,MAAM;YAChD,MAAM,kBAAkB,gBAAgB,gBAAgB,KAAK;YAC7D,eAAe;YACf,QAAQ,GAAG,CAAC,sBAAsB,iBAAiB,qBAAqB,gBAAgB,gBAAgB,EAAE,cAAc;QAC1H;IACF,GAAG;QAAC;QAAiB;KAAiB;IAEtC,MAAM,mBAAmB,CAAC;QACxB,SAAS,CAAC,OACR,KAAK,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK,EAAE,GAAG;oBAAE,GAAG,CAAC;oBAAE,YAAY,CAAC,EAAE,UAAU;gBAAC,IAAI;IAE9E;IAEA,oBAAoB;IACpB,MAAM,iBAAiB,CAAC;QACtB,IAAI,CAAC,KAAK,WAAW,EAAE;YACrB,eAAe;YACf;QACF;QAEA,QAAQ,GAAG,CAAC,yBAAyB,KAAK,WAAW;QACrD,OAAO,IAAI,CAAC,KAAK,WAAW,EAAE;IAChC;IAEA,iDAAiD;IACjD,MAAM,mBAAmB,CAAC;QACxB,IAAI,CAAC,iBAAiB,OAAO;QAE7B,MAAM,eAAe,gBAAgB,SAAS,CAAC,OAAO,CAAC,gBAAgB,gBAAgB;QACvF,MAAM,gBAAgB,gBAAgB,SAAS,CAAC,SAAS,CAAC,CAAA,SACxD,sBAAsB,YAAY,KAAK,UAAU;QAGnD,8DAA8D;QAC9D,IAAI,gBAAgB,cAAc;YAChC,OAAO;QACT;QAEA,oCAAoC;QACpC,IAAI,kBAAkB,cAAc;YAClC,OAAO;QACT;QAEA,6CAA6C;QAC7C,OAAO;IACT;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC,oIAAA,CAAA,UAAc;YAAC,cAAc;gBAAC;gBAAQ;gBAAY;aAAQ;sBACzD,cAAA,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;;;;;sCACf,8OAAC;4BAAE,WAAU;sCAAgB;;;;;;;;;;;;;;;;;;;;;;IAKvC;IAEA,qBACE,8OAAC,oIAAA,CAAA,UAAc;QAAC,cAAc;YAAC;YAAQ;YAAY;SAAQ;kBACzD,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,SAAS,IAAM,OAAO,IAAI;4BAC1B,WAAU;;8CAEV,8OAAC,8IAAA,CAAA,cAAW;oCAAC,WAAU;;;;;;8CACvB,8OAAC;oCAAK,WAAU;8CAAmB;;;;;;;;;;;;sCAGrC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAAwE;;;;;;8CAGtF,8OAAC;oCAAE,WAAU;8CAAkD;;;;;;8CAG/D,8OAAC;oCAAI,WAAU;;;;;;;;;;;;;;;;;;gBAKlB,uBACC,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAE,WAAU;kCAAW;;;;;;;;;;;gBAK3B,qBAAqB,sBACpB,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAE,WAAU;;0CACX,8OAAC;0CAAO;;;;;;4BAAc;0CACtB,8OAAC;gCACC,SAAS;gCACT,WAAU;0CACX;;;;;;;;;;;;;;;;;gBAON,CAAC,eAAe,mBAAmB,qBAAqB,sBACvD,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAE,WAAU;;4BAAU;4BACU,sBAAsB,gBAAgB,gBAAgB;4BAAE;4BACL;4BAAiB;0CACnG,8OAAC;gCACC,SAAS;gCACT,WAAU;0CACX;;;;;;;;;;;;;;;;;8BAQP,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;;8CAAI,8OAAC;oCAAK,WAAU;8CAA2B;;;;;;gCAAiB;gCAAE;;;;;;;sCACnE,8OAAC;;8CAAI,8OAAC;oCAAK,WAAU;8CAA2B;;;;;;gCAAwB;gCAAG;;;;;;;sCAC3E,8OAAC;;8CACC,8OAAC;oCAAK,WAAU;8CAA2B;;;;;;gCAAqB;gCAC/D,MAAM,MAAM,GAAG,IAAI,KAAK,CAAC,EAAE,CAAC,WAAW,GAAG;;;;;;;;;;;;;8BAK/C,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAI,WAAU;sCACZ,YAAY,GAAG,CAAC,CAAC,qBAChB,8OAAC;oCAEC,WAAW,CAAC,wGAAwG,EAAE,KAAK,WAAW,GAClI,4BACA,KAAK,QAAQ,GACX,4BACA,6BACF;8CAEJ,cAAA,8OAAC;wCAAK,WAAU;wCAA4B,OAAO,KAAK,IAAI;kDACzD,KAAK,IAAI;;;;;;mCATP,KAAK,EAAE;;;;;;;;;;sCAgBlB,8OAAC;4BAAI,WAAU;sCACZ,YAAY,GAAG,CAAC,CAAC;gCAChB,MAAM,WAAW,MAAM,IAAI,CAAC,CAAA,OAAQ,KAAK,UAAU,KAAK,KAAK,IAAI;gCAEjE,qBACE,8OAAC;oCAAkB,WAAU;8CAC1B,yBACC,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDACC,WAAW,CAAC,2CAA2C,EAAE,SAAS,UAAU,GAAG,wBAAwB,IACnG;gDACJ,SAAS,IAAM,iBAAiB;0DAEhC,cAAA,8OAAC;oDAAI,WAAU;8DACb,cAAA,8OAAC,6HAAA,CAAA,UAAK;wDACJ,KAAK,SAAS,UAAU,GAAG,gCAAgC,iBAAiB;wDAC5E,KAAI;wDACJ,OAAO;wDACP,QAAQ;wDACR,WAAU;;;;;;;;;;;;;;;;0DAKhB,8OAAC;gDAAI,WAAU;gDAAuD,OAAO,SAAS,IAAI;0DACvF,SAAS,IAAI;;;;;;0DAIhB,8OAAC;gDACC,SAAS,IAAM,eAAe;gDAC9B,WAAU;gDACV,UAAU,CAAC,SAAS,WAAW;;kEAE/B,8OAAC,8IAAA,CAAA,aAAU;wDAAC,WAAU;wDAAO,MAAM;;;;;;oDAAM;;;;;;;;;;;;6DAK7C,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,8IAAA,CAAA,YAAS;gDAAC,WAAU;;;;;;0DACrB,8OAAC;gDAAE,WAAU;0DAAU;;;;;;;;;;;;mCApCnB,KAAK,EAAE;;;;;4BA2CrB;;;;;;wBAID,MAAM,MAAM,KAAK,mBAChB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,8IAAA,CAAA,YAAS;oCAAC,WAAU;;;;;;8CACrB,8OAAC;oCAAE,WAAU;8CAAuB;;;;;;8CAGpC,8OAAC;oCAAE,WAAU;8CAA6B;;;;;;;;;;;;;;;;;;8BAQhD,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,SAAS,IAAM,qBAAqB;oCACpC,UAAU,CAAC,eAAe,qBAAqB;oCAC/C,WAAW,GAAG,wBAAwB,oBAAoB,kBAAkB,qCAAqC,EAAE,eAAe,qBAAqB,OACnJ,+CACA,gDACA;8CACL;;;;;;gCAKA,CAAC,uCACA,8OAAC;oCACC,SAAS;oCACT,UAAU,CAAC,eAAe,qBAAqB;oCAC/C,WAAW,CAAC,oDAAoD,EAAE,eAAe,qBAAqB,OAClG,+CACA,gDACA;8CACL;;;;;;gCAMF,uCACC;;sDACE,8OAAC;4CACC,SAAS;4CACT,UAAU,CAAC,eAAe,qBAAqB;4CAC/C,WAAW,CAAC,qFAAqF,EAAE,eAAe,qBAAqB,OACnI,+CACA,gDACA;;8DAEJ,8OAAC,8IAAA,CAAA,UAAO;oDAAC,WAAU;;;;;;gDAAS;;;;;;;sDAI9B,8OAAC;4CACC,SAAS;4CACT,UAAU,CAAC,eAAe,qBAAqB;4CAC/C,WAAW,CAAC,qFAAqF,EAAE,eAAe,qBAAqB,OACnI,2CACA,gDACA;;8DAEJ,8OAAC,8IAAA,CAAA,UAAQ;oDAAC,WAAU;;;;;;gDAAS;;;;;;;;;;;;;;;sCAQrC,8OAAC;4BAAI,WAAU;sCACZ,qBAAqB,qBACpB,8OAAC;0CAAE;;;;;uCACD,CAAC,4BACH,8OAAC;0CAAE;;;;;uCACD,sCACF,8OAAC;0CAAE;;;;;qDAEH,8OAAC;0CAAE;;;;;;;;;;;;;;;;;gBAMR,mCACC,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CAEb,8OAAC;gCACC,SAAS;oCACP,qBAAqB;oCACrB,gBAAgB;oCAChB,YAAY;oCACZ,mBAAmB;gCACrB;gCACA,WAAU;0CAEV,cAAA,8OAAC,8IAAA,CAAA,UAAO;;;;;;;;;;0CAGV,8OAAC;gCAAG,WAAU;0CAA4C;;;;;;0CAK1D,8OAAC;gCACC,QAAQ;gCACR,YAAY,CAAC,IAAM,EAAE,cAAc;gCACnC,WAAU;gCACV,SAAS,IAAM,aAAa,OAAO,EAAE;;kDAErC,8OAAC;wCACC,KAAI;wCACJ,KAAI;wCACJ,WAAU;;;;;;kDAGZ,8OAAC;wCAAE,WAAU;;4CAA6B;4CACnB;0DACrB,8OAAC;gDAAK,WAAU;0DAAyB;;;;;;;;;;;;kDAE3C,8OAAC;wCAAE,WAAU;kDAAwB;;;;;;kDAIrC,8OAAC;wCACC,MAAK;wCACL,QAAO;wCACP,KAAK;wCACL,WAAU;wCACV,UAAU;;;;;;;;;;;;4BAKb,8BACC,8OAAC;gCAAI,WAAU;;oCAA8E;oCAChF,aAAa,IAAI;;;;;;;0CAKhC,8OAAC;gCACC,SAAS;gCACT,UAAU,CAAC;gCACX,WAAU;0CACX;;;;;;;;;;;;;;;;;8BAQP,8OAAC;oBACC,QAAQ,MAAM,MAAM;oBACpB,SAAS;oBACT,OAAO,MAAM,KAAK;oBAClB,SAAS,MAAM,OAAO;oBACtB,MAAM,MAAM,IAAI;oBAChB,WAAW,MAAM,SAAS;oBAC1B,aAAa,MAAM,WAAW;oBAC9B,YAAY,MAAM,UAAU;oBAC5B,WAAW,MAAM,SAAS;oBAC1B,kBAAkB,MAAM,gBAAgB;oBACxC,YAAY,MAAM,UAAU;oBAC5B,eAAe,MAAM,aAAa;;;;;;8BAIpC,8OAAC;oBACC,QAAQ,aAAa,MAAM;oBAC3B,SAAS,aAAa,OAAO;;;;;;;;;;;;;;;;;AAKvC","debugId":null}}]
}