(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6879],{1864:(e,t,s)=>{Promise.resolve().then(s.bind(s,8503))},8503:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(5155),r=s(2115),l=s(5695),i=s(9911),o=s(9053),n=s(760),c=s(8274);function d(e){let{isOpen:t,onClose:s,projects:r}=e;return(0,a.jsx)(n.N,{children:t&&(0,a.jsx)(c.P.div,{className:"fixed inset-0 backdrop-blur-md bg-white/20 flex justify-center items-center z-50 p-4",initial:{opacity:0,backdropFilter:"blur(0px)"},animate:{opacity:1,backdropFilter:"blur(8px)"},exit:{opacity:0,backdropFilter:"blur(0px)"},onClick:s,children:(0,a.jsxs)(c.P.div,{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl border border-white/20 p-8 w-full max-w-3xl relative overflow-y-auto max-h-[85vh] mx-4",initial:{scale:.9,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:50},transition:{duration:.4,type:"spring",damping:20,stiffness:300},onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{className:"absolute top-6 right-6 w-8 h-8 flex items-center justify-center rounded-full bg-gray-100/80 hover:bg-gray-200/80 text-gray-600 hover:text-gray-800 transition-all duration-200 hover:scale-110",onClick:s,children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)(c.P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:400},className:"w-16 h-16 bg-gradient-to-br from-[#B11016] to-[#8B0C11] rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,a.jsx)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-[#B11016] to-[#8B0C11] bg-clip-text text-transparent mb-2",children:"Recommended Projects"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Discover curated projects tailored for your success"})]}),(0,a.jsx)("div",{className:"space-y-6",children:r.map((e,t)=>(0,a.jsxs)(c.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t,duration:.3},className:"group bg-white/60 backdrop-blur-sm border border-gray-400/50 rounded-xl p-6 hover:shadow-xl hover:bg-white/80 transition-all duration-300 hover:-translate-y-1",children:[(0,a.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-gradient-to-r from-[#B11016] to-[#8B0C11] rounded-full"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 group-hover:text-[#B11016] transition-colors duration-200",children:e.title})]}),(0,a.jsx)("p",{className:"text-gray-700 leading-relaxed mb-4",children:e.description})]})}),(0,a.jsxs)("button",{className:"w-full bg-gradient-to-r from-[#B11016] to-[#8B0C11] hover:from-[#8B0C11] hover:to-[#B11016] text-white px-6 py-3 rounded-lg font-semibold transition-all duration-300 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2 group",children:[(0,a.jsx)("span",{children:"Adapt Recommended Project"}),(0,a.jsx)("svg",{className:"w-4 h-4 transition-transform duration-200 group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]},t))}),0===r.length&&(0,a.jsxs)(c.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Projects Available"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Check back later for recommended projects."})]})]})})})}var x=s(6636);function m(){var e;let t="http://localhost:5000",s=(0,l.useRouter)(),n=(0,l.useSearchParams)(),[c,m]=(0,r.useState)(null),[h,u]=(0,r.useState)(!0),[j,b]=(0,r.useState)(""),[g,f]=(0,r.useState)(null),[y,N]=(0,r.useState)("all"),v=n.get("id"),[w,k]=(0,r.useState)([]),[B,C]=(0,r.useState)(!1),[S,_]=(0,r.useState)(null),[A,L]=(0,r.useState)([]),[P,M]=(0,r.useState)(!1),[z,R]=(0,r.useState)(null),[F,I]=(0,r.useState)([]),[E,D]=(0,r.useState)(!1),[W,T]=(0,r.useState)(null),[H,U]=(0,r.useState)(!1),q=async()=>{let e=sessionStorage.getItem("access_token");if(e&&v){D(!0),T(null);try{let s=await fetch("".concat(t,"/api/project_recommendation/company/").concat(v),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(s.ok){let e=await s.json();if(Array.isArray(e)&&e.length>0){let t=e[0],s=[{title:t.title1||"Untitled Project",description:t.description1||"No description available."},{title:t.title2||"Untitled Project",description:t.description2||"No description available."},{title:t.title3||"Untitled Project",description:t.description3||"No description available."}].filter(e=>e.title&&e.description);I(s)}else I([])}else{let e=await s.json();T(e.error||"Failed to fetch recommended projects.")}}catch(e){console.error(e),T("Network error occurred while loading recommendations.")}finally{D(!1)}}};(0,r.useEffect)(()=>{v&&q()},[v]),(0,r.useEffect)(()=>{let e=sessionStorage.getItem("access_token");e&&v&&(console.log(e),(async()=>{if("pending"===y){M(!0),R(null);try{let s=await fetch("".concat(t,"/api/proposal/get_company/").concat(v),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();L(e.proposals||[])}else{let e=await s.json();R(e.error||"Failed to load proposals")}}catch(e){R("Network error occurred while loading proposals.")}finally{M(!1)}}if("all"===y){C(!0),_(null);try{let s=await fetch("".concat(t,"/api/proposal/get_company_filtered/").concat(v),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();k(e.proposals||[])}else if(404===s.status)k([]);else{let e=await s.json();_(e.error||"Failed to load approved projects.")}}catch(e){_("Network error occurred while loading approved proposals.")}finally{C(!1)}}})())},[y,t,v]);let G=e=>{s.push("/bpiproposaltracking?id=".concat(e))},O=e=>{if(null==e)return"0%";let t=100*e;return Number.isInteger(t)?"".concat(t,"%"):"".concat(t.toFixed(2),"%")},V=((e,t,s)=>{let a=[e,t,s].filter(e=>null!=e);return 0===a.length?0:100*(a.reduce((e,t)=>e+t,0)/a.length)})(null==g?void 0:g.credibility_score,null==g?void 0:g.referential_score,null==g?void 0:g.compliance_score);(0,r.useEffect)(()=>{(async()=>{if(!v){b("Company ID is required to view company profile."),u(!1);return}let e=sessionStorage.getItem("access_token");if(!e){b("Authentication required. Please log in first."),u(!1);return}try{let s=await fetch("".concat(t,"/api/company/").concat(v),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(s.ok){let e=await s.json();m(e.company)}else{let e=await s.json();b(e.error||"Failed to load company data")}let a=await fetch("".concat(t,"/api/synergy/company/").concat(v),{headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){let e=await a.json();f(e)}else console.warn("No synergy data available for this company")}catch(e){b("Network error occurred while loading data.")}finally{u(!1)}})()},[t,v]);let Q=e=>e?e.split("•").map(e=>e.trim()).filter(e=>e.length>0):[],X=e=>{let t=["#B11016","#60080c"];return e.map((e,s)=>(0,a.jsx)("div",{className:"text-white rounded-md p-3 text-sm text-left shadow-md",style:{backgroundColor:t[s%t.length]},children:e},s))};return h?(0,a.jsx)(o.A,{allowedRoles:["employee","admin"],children:(0,a.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#B11016] mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading company profile..."})]})})}):j?(0,a.jsx)(o.A,{allowedRoles:["employee","admin"],children:(0,a.jsx)("div",{className:"min-h-screen bg-white flex flex-col items-center justify-center px-[10%]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"⚠"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Error Loading Company"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:j}),(0,a.jsx)("button",{onClick:()=>s.back(),className:"bg-[#B11016] text-white py-2 px-6 rounded-lg hover:bg-[#800b10] transition-colors",children:"Go Back"})]})})}):c?(0,a.jsxs)(o.A,{allowedRoles:["employee","admin"],children:[(0,a.jsxs)("div",{className:"min-h-screen bg-white flex flex-col items-center px-[10%] py-8",children:[(0,a.jsx)("div",{className:"relative flex items-center w-full mt-2 mb-10",children:(0,a.jsxs)("button",{onClick:()=>s.back(),className:"absolute left-0 flex items-center text-[#B11016] hover:text-[#800b10]",children:[(0,a.jsx)(i.QVr,{className:"mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Back to Company List"})]})}),(0,a.jsxs)("div",{className:"w-full max-w-8xl mx-auto",children:[(0,a.jsx)("div",{className:"text-center mb-8",children:c.logo?(0,a.jsx)("div",{className:"inline-block",children:(0,a.jsx)("img",{src:c.logo,alt:"".concat(c.name," Logo"),className:"max-w-48 max-h-48 mx-auto rounded-lg shadow-lg"})}):(0,a.jsx)("div",{className:"w-48 h-48 mx-auto bg-gray-200 rounded-lg flex items-center justify-center shadow-lg",children:(0,a.jsx)("span",{className:"text-gray-500 text-lg font-medium",children:"No Logo"})})}),(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h2",{className:"text-3xl sm:text-5xl font-bold mb-4 text-[#B11016]",children:c.name}),c.bio&&(0,a.jsx)("p",{className:"text-gray-600 text-lg max-w-2xl mx-auto leading-relaxed",children:c.bio})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-6 mb-8 border-b-2 border-gray-800 pb-4",children:[c.address&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 transition-colors",children:[(0,a.jsx)(i.vq8,{className:"text-2xl",style:{color:"#B11016"}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800",children:"Location"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:c.address})]})]}),c.website&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 transition-colors",children:[(0,a.jsx)(i.f35,{className:"text-2xl",style:{color:"#B11016"}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800",children:"Website"}),(0,a.jsx)("a",{href:c.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm hover:underline break-all",style:{color:"#B11016"},children:c.website.replace(/^https?:\/\//,"")})]})]}),c.industry&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 transition-colors",children:[(0,a.jsx)(i._yv,{className:"text-2xl",style:{color:"#B11016"}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800",children:"Industry"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:c.industry})]})]}),c.size&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 transition-colors",children:[(0,a.jsx)(i.YXz,{className:"text-2xl",style:{color:"#B11016"}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800",children:"Team Size"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:(e=c.size)&&"N/A"!==e?e:"N/A"})]})]}),c.contact_email&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 transition-colors",children:[(0,a.jsx)(i.maD,{className:"text-2xl",style:{color:"#B11016"}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800",children:"Contact Email"}),(0,a.jsx)("a",{href:"mailto:".concat(c.contact_email),className:"text-sm hover:underline break-all",style:{color:"#B11016"},children:c.contact_email})]})]}),c.created_at&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 transition-colors",children:[(0,a.jsx)(i.bfZ,{className:"text-2xl",style:{color:"#B11016"}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800",children:"Registered Since"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:new Date(c.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]}),g&&(0,a.jsxs)("div",{className:"text-center my-12 border-b-2 border-gray-800 pb-10",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-red-700 mb-6",children:"Synergy Score"}),(0,a.jsx)("div",{className:"w-48 h-48 mx-auto mb-12",children:(0,a.jsx)(x.QF,{value:V,text:"".concat(O(V/100)),styles:(0,x.Hf)({textSize:"20px",textColor:"#111827",pathColor:"#B11016",trailColor:"#d1d5db"})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-10 max-w-6xl mx-auto text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-xl font-bold text-red-700 mb-2",children:"Credibility"}),(0,a.jsx)("p",{className:"text-4xl font-bold mb-4",children:O(g.credibility_score)}),(0,a.jsx)("div",{className:"border-t-2 border-gray-800 mb-8"}),(0,a.jsx)("div",{className:"space-y-6",children:X(Q(g.credibility_reasonings))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-xl font-bold text-red-700 mb-2",children:"Referential"}),(0,a.jsx)("p",{className:"text-4xl font-bold mb-4",children:O(g.referential_score)}),(0,a.jsx)("div",{className:"border-t-2 border-gray-800 mb-8"}),(0,a.jsx)("div",{className:"space-y-6",children:X(Q(g.referential_reasonings))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-xl font-bold text-red-700 mb-2",children:"Compliance"}),(0,a.jsx)("p",{className:"text-4xl font-bold mb-4",children:O(g.compliance_score)}),(0,a.jsx)("div",{className:"border-t-2 border-gray-800 mb-8"}),(0,a.jsx)("div",{className:"space-y-6",children:X(Q(g.compliance_reasonings))})]})]})]}),(0,a.jsxs)("div",{className:"w-full px-[10%] justify-center",children:[(0,a.jsxs)("div",{className:"flex w-full border-b mb-4",children:[(0,a.jsx)("button",{onClick:()=>N("pending"),className:"flex-1 text-center py-2 font-semibold transition ".concat("pending"===y?"bg-[#B11016] text-white rounded-t":"text-gray-600 hover:text-black"),children:"Proposals Submitted"}),(0,a.jsx)("button",{onClick:()=>N("all"),className:"flex-1 text-center py-2 font-semibold transition ".concat("all"===y?"bg-[#B11016] text-white rounded-t":"text-gray-600 hover:text-black"),children:"Projects Together"})]}),(0,a.jsx)("div",{className:"w-full bg-white shadow rounded-lg p-4 overflow-x-auto border border-gray-400",children:"pending"===y?P?(0,a.jsx)("p",{className:"text-center",children:"Loading proposals..."}):z?(0,a.jsx)("p",{className:"text-center",children:z}):(0,a.jsx)(p,{files:A,onRowClick:G,emptyMessage:"No proposals submitted yet."}):B?(0,a.jsx)("p",{className:"text-center",children:"Loading approved projects..."}):S?(0,a.jsx)("p",{className:"text-center",children:S}):(0,a.jsx)(p,{files:w,onRowClick:G,emptyMessage:"No approved projects yet."})}),(0,a.jsx)("div",{className:"flex justify-center mt-4",children:(0,a.jsx)("button",{className:"min-w-2xl cursor-pointer font-bold text-center py-4 px-6 text-white bg-[#B11016] border-2 border-[#B11016] rounded-md hover:text-[#B11016] hover:bg-white hover:border-[#B11016] transition-all duration-300 ease-in-out transform hover:scale-105 text-base sm:text-lg",onClick:()=>{U(!0)},children:"Get Project Ideas"})})]})]})]}),(0,a.jsx)(d,{isOpen:H,onClose:()=>U(!1),projects:F})]}):(0,a.jsx)(o.A,{allowedRoles:["employee","admin"],children:(0,a.jsx)("div",{className:"min-h-screen bg-white flex flex-col items-center justify-center px-[10%]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(i._yv,{className:"text-6xl text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-600 mb-2",children:"No Company Data"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"Company profile could not be loaded."}),(0,a.jsx)("button",{onClick:()=>s.back(),className:"bg-[#B11016] text-white py-2 px-6 rounded-lg hover:bg-[#800b10] transition-colors",children:"Go Back"})]})})})}function h(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}),children:(0,a.jsx)(o.A,{allowedRoles:["employee","admin"],children:(0,a.jsx)(m,{})})})}s(839);let p=e=>{let{files:t,emptyMessage:s,onRowClick:r}=e;return(0,a.jsxs)("table",{className:"w-full text-sm rounded-lg overflow-hidden min-w-[600px]",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Proposal ID"}),(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Proposal Title"}),(0,a.jsx)("th",{className:"p-3 text-left text-red-700 whitespace-nowrap",children:"Status"}),(0,a.jsx)("th",{className:"p-3 text-center text-red-700 whitespace-nowrap",children:"Action"})]})}),(0,a.jsx)("tbody",{children:t.length>0?t.map((e,t)=>(0,a.jsxs)("tr",{className:"border-t hover:bg-gray-100 transition cursor-pointer",onClick:()=>r(e.id),children:[(0,a.jsx)("td",{className:"p-3",children:e.id}),(0,a.jsx)("td",{className:"p-3",children:e.title}),(0,a.jsx)("td",{className:"p-3",children:e.status}),(0,a.jsx)("td",{className:"p-3 text-center",children:(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})})]},t)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"text-center py-4",children:s})})})]})}},9053:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(5155),r=s(5695),l=s(2115);function i(e){let{children:t,allowedRoles:s}=e,i=(0,r.useRouter)(),[o,n]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let e=sessionStorage.getItem("access_token"),t=sessionStorage.getItem("role");return e&&t?s.includes(t)?void n(!1):void i.push("/"):void i.push("/login")},[i,s]),(0,a.jsx)(a.Fragment,{children:t})}}},e=>{e.O(0,[2318,6711,8324,3682,8441,5964,7358],()=>e(e.s=1864)),_N_E=e.O()}]);